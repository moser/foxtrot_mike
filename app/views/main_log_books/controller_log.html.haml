.controls.no_print
  = link_to t("views.as_pdf"), airfield_main_log_book_path(@airfield, :as => "controller_log", :filter => { :date_parse_date => @date }, :format =>:pdf)

%h1= t("views.controller_log", :name => @airfield.name)
%form.no_print.submit_when_changed
  %input{ :type => 'hidden', :value => 'controller_log', :name => 'as' }
  .input.date
    = date_select :filter, :date, :default => @date
  = submit_tag 'Ok', :class => 'hide_on_startup'
.only_print
  = t("views.date")
  = l(@date)
- unless @controllers.count == 0
  .controller_log
    .times
      = t(".start_time") 
      %input.timepicker.linked{ :value => l(@controllers.first[:from], :format => :time), 'data-link-group' => 0 }
      = t(".end_time") 
      %input.timepicker.linked{ :value => l(@controllers.last[:to], :format => :time), 'data-link-group' => @controllers.count }
    .sunrise
      = t(".sunrise")
      = l(@airfield.srss.sunrise(@date), :format => :time)
    .sunset
      = t(".sunset")
      = l(@airfield.srss.sunset(@date), :format => :time)
    %table.controllers
      %tr
        %th= t('views.controller')
        %th= t('views.from')
        %th= t('views.to')
        %th= t('views.signature')
      - i = 0
      - @controllers.each do |c|
        %tr
          %td= c[:person].name rescue "NONE"
          %td
            %input.timepicker.linked{ :value => l(c[:from], :format => :time), 'data-link-group' => i }
          %td
            %input.timepicker.linked{ :value => l(c[:to], :format => :time), 'data-link-group' => i + 1 }
          %td.signature
        - i += 1
- else
  = t('.no_flights')
